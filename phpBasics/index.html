<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHP Basics - Practical Launcher</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .header {
            background-color: #ffffff;
            padding: 1rem 2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            z-index: 10;
        }

        h1 {
            color: #333;
            font-size: 1.2rem;
            margin: 0;
            margin-right: 20px;
        }

        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
            background-color: #f9f9f9;
            min-width: 200px;
            cursor: pointer;
        }

        .iframe-container {
            flex-grow: 1;
            width: 100%;
            background-color: #fff;
            position: relative;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        .placeholder-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ccc;
            font-size: 1.5rem;
            pointer-events: none;
        }
    </style>
</head>

<body>

    <div class="header">
        <h1>PHP Basics</h1>
        <div class="controls">
            <select id="folderSelect">
                <option value="">-- Select Folder --</option>
                <option value="Practice_1">Practice 1</option>
                <option value="Practice_2">Practice 2</option>
                <option value="Practice_3">Practice 3</option>
                <option value="Practice_4">Practice 4</option>
                <option value="Practice_5">Practice 5</option>
                <option value="Practice_6">Practice 6</option>
                <option value="Practice_7">Practice 7</option>
            </select>

            <select id="fileSelect" disabled>
                <option value="">-- First Select Folder --</option>
            </select>
        </div>
    </div>

    <div class="iframe-container">
        <div id="placeholder" class="placeholder-text">Select a practical to view output</div>
        <iframe id="outputFrame" name="outputFrame"></iframe>
    </div>

    <script>
        const practicals = {
            "Practice_1": [
                { name: "Practical 1.1: Product Price (PHP-NEW-01)", path: "01_product_price.php" },
                { name: "Practical 1.2: Name Length (PHP-NEW-02)", path: "01_name_length.php" },
                { name: "Practical 1.3: Constants (PHP-NEW-03)", path: "01_constants.php" },
                { name: "Practical 1.4: Variable Swap (PHP-NEW-04)", path: "01_variable_swap.php" },
                { name: "Practical 1.5: isset vs empty (PHP-NEW-05)", path: "01_isset_vs_empty.php" },
                { name: "Practical 1: Variables (PHP-001)", path: "01_variables.php" },
                { name: "Practical 2: Arrays (PHP-002)", path: "02_arrays.php" }
            ],
            "Practice_2": [
                { name: "Practical 2.1: Array Sum & Max (PHP-NEW-2.1)", path: "02_array_sum_max.php" },
                { name: "Practical 2.2: User Profile (PHP-NEW-2.2)", path: "02_user_profile_keys_only.php" },
                { name: "Practical 2.3: Array Modify (PHP-NEW-2.3)", path: "02_array_modify.php" },
                { name: "Practical 2.4: JSON Handling (PHP-NEW-2.4)", path: "02_json_handling.php" },
                { name: "Practical 2.5: Debug Functions (PHP-NEW-2.5)", path: "02_debug_functions.php" },
                { name: "Practical 3: Control Structures (PHP-003)", path: "03_control_structures.php" },
                { name: "Practical 4: Loops (PHP-004)", path: "04_loops.php" }
            ],
            "Practice_3": [
                { name: "Practical 3.1: Positive/Negative/Zero (PHP-NEW-3.1)", path: "03_positive_negative_zero.php" },
                { name: "Practical 3.2: Loop 1 to 100 (PHP-NEW-3.2)", path: "03_loop_1_to_100.php" },
                { name: "Practical 3.3: Reverse String (PHP-NEW-3.3)", path: "03_reverse_string.php" },
                { name: "Practical 3.4: Count Vowels (PHP-NEW-3.4)", path: "03_count_vovels.php" },
                { name: "Practical 5: Functions (PHP-005)", path: "05_functions.php" },
                { name: "Practical 6: Built-in Functions (PHP-006)", path: "06_builtin_functions.php" }
            ],
            "Practice_4": [
                { name: "Practical 7: Classes (PHP-007)", path: "07_Classes.php" },
                { name: "Practical 8: Encapsulation (PHP-008)", path: "08_encapsulation.php" }
            ],
            "Practice_5": [
                { name: "Practical 9: Inheritance (PHP-009)", path: "09_inheritance.php" },
                { name: "Practical 10: Magic Methods (PHP-010)", path: "10_magic_methods.php" }
            ],
            "Practice_6": [
                { name: "Practical 11: Cookies (PHP-011)", path: "11_cookies.php" },
                { name: "Practical 12: Sessions (PHP-012)", path: "12_page2.php" }
            ],
            "Practice_7": [
                { name: "Practical 13: Namespaces (PHP-013/14)", path: "index.php" }
            ]
        };

        const folderSelect = document.getElementById('folderSelect');
        const fileSelect = document.getElementById('fileSelect');
        const outputFrame = document.getElementById('outputFrame');
        const placeholder = document.getElementById('placeholder');

        folderSelect.addEventListener('change', function () {
            const selectedFolder = this.value;
            localStorage.setItem('selectedFolder', selectedFolder); // Save folder selection

            fileSelect.innerHTML = '<option value="">-- Select File --</option>';
            // Reset iframe
            outputFrame.src = "";
            placeholder.style.display = 'block';

            if (selectedFolder && practicals[selectedFolder]) {
                fileSelect.disabled = false;
                practicals[selectedFolder].forEach(file => {
                    const option = document.createElement('option');
                    option.value = selectedFolder + '/' + file.path;
                    option.textContent = file.name;
                    fileSelect.appendChild(option);
                });
            } else {
                fileSelect.disabled = true;
                fileSelect.innerHTML = '<option value="">-- First Select Folder --</option>';
            }

            // Clear file selection in storage when folder changes explicitly by user
            localStorage.removeItem('selectedFile');
        });

        fileSelect.addEventListener('change', function () {
            const selectedValue = this.value;
            if (selectedValue) {
                localStorage.setItem('selectedFile', selectedValue); // Save file selection
                outputFrame.src = selectedValue;
                placeholder.style.display = 'none';
            } else {
                localStorage.removeItem('selectedFile');
                outputFrame.src = "";
                placeholder.style.display = 'block';
            }
        });

        // Restore state on load
        window.addEventListener('load', function () {
            const savedFolder = localStorage.getItem('selectedFolder');
            const savedFile = localStorage.getItem('selectedFile');

            if (savedFolder && practicals[savedFolder]) {
                folderSelect.value = savedFolder;
                // Trigger folder population logic manually to avoid clearing savedFile
                fileSelect.innerHTML = '<option value="">-- Select File --</option>';
                fileSelect.disabled = false;
                practicals[savedFolder].forEach(file => {
                    const option = document.createElement('option');
                    option.value = savedFolder + '/' + file.path;
                    option.textContent = file.name;
                    fileSelect.appendChild(option);
                });

                if (savedFile) {
                    fileSelect.value = savedFile;
                    // Trigger file load logic
                    if (fileSelect.value === savedFile) { // Check if valid option exists
                        outputFrame.src = savedFile;
                        placeholder.style.display = 'none';
                    }
                }
            }
        });
    </script>

</body>

</html>